var en=Object.defineProperty,tn=Object.defineProperties;var nn=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols,rn=Object.getPrototypeOf,je=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,sn=Reflect.get;var $e=(t,e,n)=>e in t?en(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,He=(t,e)=>{for(var n in e||={})je.call(e,n)&&$e(t,n,e[n]);if(V)for(var n of V(e))Ve.call(e,n)&&$e(t,n,e[n]);return t},ze=(t,e)=>tn(t,nn(e));var is=(t,e)=>{var n={};for(var r in t)je.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&V)for(var r of V(t))e.indexOf(r)<0&&Ve.call(t,r)&&(n[r]=t[r]);return n};var ss=(t,e,n)=>sn(rn(t),n,e);var u=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(f){i(f)}},o=c=>{try{a(n.throw(c))}catch(f){i(f)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var We=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},on=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,g=s>>2,d=(s&3)<<4|a>>4,I=(a&15)<<2|f>>6,j=f&63;c||(j=64,o||(I=64)),r.push(n[g],n[d],n[I],n[j])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(We(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):on(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let f=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||f==null||d==null)throw new re;let I=s<<2|a>>4;if(r.push(I),f!==64){let j=a<<4&240|f>>2;if(r.push(j),d!==64){let Zt=f<<6&192|d;r.push(Zt)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},re=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},an=function(t){let e=We(t);return Ke.encodeByteArray(e,!0)},L=function(t){return an(t).replace(/\./g,"")},cn=function(t){try{return Ke.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function un(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ln=()=>un().__FIREBASE_DEFAULTS__,fn=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dn=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&cn(t[1]);return e&&JSON.parse(e)},se=()=>{try{return ln()||fn()||dn()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hn=t=>{var e,n;return(n=(e=se())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},as=t=>{let e=hn(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oe=()=>{var t;return(t=se())===null||t===void 0?void 0:t.config},cs=t=>{var e;return(e=se())===null||e===void 0?void 0:e[`_${t}`]};var H=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function us(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[L(JSON.stringify(n)),L(JSON.stringify(o)),a].join(".")}function Ge(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ls(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function fs(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ds(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hs(){let t=Ge();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function z(){try{return typeof indexedDB=="object"}catch{return!1}}function q(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var pn="FirebaseError",v=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pn,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}},w=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?gn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new v(i,a,r)}};function gn(t,e){return t.replace(mn,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var mn=/\{\$([^}]+)}/g;function ps(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function P(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(qe(s)&&qe(o)){if(!P(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function qe(t){return t!==null&&typeof t=="object"}function gs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ms(t,e){let n=new ie(t,e);return n.subscribe.bind(n)}var ie=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bn(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ne),i.error===void 0&&(i.error=ne),i.complete===void 0&&(i.complete=ne);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function bn(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ne(){}var _n=1e3,En=2,In=4*60*60*1e3,yn=.5;function bs(t,e=_n,n=En){let r=e*Math.pow(n,t),i=Math.round(yn*r*(Math.random()-.5)*2);return Math.min(In,r+i)}function W(t){return t&&t._delegate?t._delegate:t}var vn=[],l=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(l||{}),wn={debug:l.DEBUG,verbose:l.VERBOSE,info:l.INFO,warn:l.WARN,error:l.ERROR,silent:l.SILENT},Tn=l.INFO,Sn={[l.DEBUG]:"log",[l.VERBOSE]:"log",[l.INFO]:"info",[l.WARN]:"warn",[l.ERROR]:"error"},An=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Sn[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},x=class{constructor(e){this.name=e,this._logLevel=Tn,this._logHandler=An,this._userLogHandler=null,vn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in l))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,l.DEBUG,...e),this._logHandler(this,l.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,l.VERBOSE,...e),this._logHandler(this,l.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,l.INFO,...e),this._logHandler(this,l.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,l.WARN,...e),this._logHandler(this,l.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,l.ERROR,...e),this._logHandler(this,l.ERROR,...e)}};var b=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var O="[DEFAULT]";var ae=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new H;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(On(e))try{this.getOrInitializeService({instanceIdentifier:O})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=O){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return u(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=O){return this.instances.has(e)}getOptions(e=O){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cn(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=O){return this.component?this.component.multipleInstances?e:O:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Cn(t){return t===O?void 0:t}function On(t){return t.instantiationMode==="EAGER"}var K=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new ae(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Dn=(t,e)=>e.some(n=>t instanceof n),Xe,Ye;function Nn(){return Xe||(Xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rn(){return Ye||(Ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Qe=new WeakMap,ue=new WeakMap,Ze=new WeakMap,ce=new WeakMap,fe=new WeakMap;function Mn(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Qe.set(n,t)}).catch(()=>{}),fe.set(e,t),e}function kn(t){if(ue.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ue.set(t,e)}var le={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ue.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ze.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function et(t){le=t(le)}function Pn(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(G(this),e,...n);return Ze.set(r,e.sort?e.sort():[e]),_(r)}:Rn().includes(t)?function(...e){return t.apply(G(this),e),_(Qe.get(this))}:function(...e){return _(t.apply(G(this),e))}}function xn(t){return typeof t=="function"?Pn(t):(t instanceof IDBTransaction&&kn(t),Dn(t,Nn())?new Proxy(t,le):t)}function _(t){if(t instanceof IDBRequest)return Mn(t);if(ce.has(t))return ce.get(t);let e=xn(t);return e!==t&&(ce.set(t,e),fe.set(e,t)),e}var G=t=>fe.get(t);function J(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=_(o);return r&&o.addEventListener("upgradeneeded",c=>{r(_(o.result),c.oldVersion,c.newVersion,_(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),a}function Ss(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),_(n).then(()=>{})}var Bn=["get","getKey","getAll","getAllKeys","count"],Ln=["put","add","delete","clear"],de=new Map;function tt(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(de.get(e))return de.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Ln.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Bn.includes(n)))return;let s=function(o,...a){return u(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),f=c.store;return r&&(f=f.index(a.shift())),(yield Promise.all([f[n](...a),i&&c.done]))[0]})};return de.set(e,s),s}et(t=>ze(He({},t),{get:(e,n,r)=>tt(e,n)||t.get(e,n,r),has:(e,n)=>!!tt(e,n)||t.has(e,n)}));var pe=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fn(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Fn(t){let e=t.getComponent();return e?.type==="VERSION"}var ge="@firebase/app",nt="0.9.27";var D=new x("@firebase/app"),Un="@firebase/app-compat",$n="@firebase/analytics-compat",jn="@firebase/analytics",Vn="@firebase/app-check-compat",Hn="@firebase/app-check",zn="@firebase/auth",qn="@firebase/auth-compat",Wn="@firebase/database",Kn="@firebase/database-compat",Gn="@firebase/functions",Jn="@firebase/functions-compat",Xn="@firebase/installations",Yn="@firebase/installations-compat",Qn="@firebase/messaging",Zn="@firebase/messaging-compat",er="@firebase/performance",tr="@firebase/performance-compat",nr="@firebase/remote-config",rr="@firebase/remote-config-compat",ir="@firebase/storage",sr="@firebase/storage-compat",or="@firebase/firestore",ar="@firebase/firestore-compat",cr="firebase",ur="10.8.0";var me="[DEFAULT]",lr={[ge]:"fire-core",[Un]:"fire-core-compat",[jn]:"fire-analytics",[$n]:"fire-analytics-compat",[Hn]:"fire-app-check",[Vn]:"fire-app-check-compat",[zn]:"fire-auth",[qn]:"fire-auth-compat",[Wn]:"fire-rtdb",[Kn]:"fire-rtdb-compat",[Gn]:"fire-fn",[Jn]:"fire-fn-compat",[Xn]:"fire-iid",[Yn]:"fire-iid-compat",[Qn]:"fire-fcm",[Zn]:"fire-fcm-compat",[er]:"fire-perf",[tr]:"fire-perf-compat",[nr]:"fire-rc",[rr]:"fire-rc-compat",[ir]:"fire-gcs",[sr]:"fire-gcs-compat",[or]:"fire-fst",[ar]:"fire-fst-compat","fire-js":"fire-js",[cr]:"fire-js-all"};var F=new Map,be=new Map;function fr(t,e){try{t.container.addComponent(e)}catch(n){D.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function A(t){let e=t.name;if(be.has(e))return D.debug(`There were multiple attempts to register component ${e}.`),!1;be.set(e,t);for(let n of F.values())fr(n,t);return!0}function B(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var dr={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},S=new w("app","Firebase",dr);var _e=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new b("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw S.create("app-deleted",{appName:this._name})}};var xs=ur;function hr(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:me,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw S.create("bad-app-name",{appName:String(i)});if(n||(n=oe()),!n)throw S.create("no-options");let s=F.get(i);if(s){if(P(n,s.options)&&P(r,s.config))return s;throw S.create("duplicate-app",{appName:i})}let o=new K(i);for(let c of be.values())o.addComponent(c);let a=new _e(n,r,o);return F.set(i,a),a}function ye(t=me){let e=F.get(t);if(!e&&t===me&&oe())return hr();if(!e)throw S.create("no-app",{appName:t});return e}function Bs(){return Array.from(F.values())}function T(t,e,n){var r;let i=(r=lr[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),D.warn(a.join(" "));return}A(new b(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var pr="firebase-heartbeat-database",gr=1,U="firebase-heartbeat-store",he=null;function ot(){return he||(he=J(pr,gr,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(U)}catch(n){console.warn(n)}}}}).catch(t=>{throw S.create("idb-open",{originalErrorMessage:t.message})})),he}function mr(t){return u(this,null,function*(){try{let n=(yield ot()).transaction(U),r=yield n.objectStore(U).get(at(t));return yield n.done,r}catch(e){if(e instanceof v)D.warn(e.message);else{let n=S.create("idb-get",{originalErrorMessage:e?.message});D.warn(n.message)}}})}function rt(t,e){return u(this,null,function*(){try{let r=(yield ot()).transaction(U,"readwrite");yield r.objectStore(U).put(e,at(t)),yield r.done}catch(n){if(n instanceof v)D.warn(n.message);else{let r=S.create("idb-set",{originalErrorMessage:n?.message});D.warn(r.message)}}})}function at(t){return`${t.name}!${t.options.appId}`}var br=1024,_r=30*24*60*60*1e3,Ee=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Ie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return u(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=it();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=_r}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return u(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=it(),{heartbeatsToSend:r,unsentEntries:i}=Er(this._heartbeatsCache.heartbeats),s=L(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function it(){return new Date().toISOString().substring(0,10)}function Er(t,e=br){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),st(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),st(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Ie=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return u(this,null,function*(){return z()?q().then(()=>!0).catch(()=>!1):!1})}read(){return u(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield mr(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return u(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rt(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return u(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rt(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function st(t){return L(JSON.stringify({version:2,heartbeats:t})).length}function Ir(t){A(new b("platform-logger",e=>new pe(e),"PRIVATE")),A(new b("heartbeat",e=>new Ee(e),"PRIVATE")),T(ge,nt,t),T(ge,nt,"esm2017"),T("fire-js","")}Ir("");var lt="@firebase/installations",Se="0.6.5";var ft=1e4,dt=`w:${Se}`,ht="FIS_v2",yr="https://firebaseinstallations.googleapis.com/v1",vr=60*60*1e3,wr="installations",Tr="Installations";var Sr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},R=new w(wr,Tr,Sr);function pt(t){return t instanceof v&&t.code.includes("request-failed")}function gt({projectId:t}){return`${yr}/projects/${t}/installations`}function mt(t){return{token:t.token,requestStatus:2,expiresIn:Cr(t.expiresIn),creationTime:Date.now()}}function bt(t,e){return u(this,null,function*(){let r=(yield e.json()).error;return R.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function _t({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Ar(t,{refreshToken:e}){let n=_t(t);return n.append("Authorization",Or(e)),n}function Et(t){return u(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function Cr(t){return Number(t.replace("s","000"))}function Or(t){return`${ht} ${t}`}function Dr(r,i){return u(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=gt(t),o=_t(t),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={fid:n,authVersion:ht,appId:t.appId,sdkVersion:dt},f={method:"POST",headers:o,body:JSON.stringify(c)},g=yield Et(()=>fetch(s,f));if(g.ok){let d=yield g.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:mt(d.authToken)}}else throw yield bt("Create Installation",g)})}function It(t){return new Promise(e=>{setTimeout(e,t)})}function Nr(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var Rr=/^[cdef][\w-]{21}$/,Te="";function Mr(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=kr(t);return Rr.test(n)?n:Te}catch{return Te}}function kr(t){return Nr(t).substr(0,22)}function Y(t){return`${t.appName}!${t.appId}`}var yt=new Map;function vt(t,e){let n=Y(t);wt(n,e),Pr(n,e)}function wt(t,e){let n=yt.get(t);if(n)for(let r of n)r(e)}function Pr(t,e){let n=xr();n&&n.postMessage({key:t,fid:e}),Br()}var N=null;function xr(){return!N&&"BroadcastChannel"in self&&(N=new BroadcastChannel("[Firebase] FID Change"),N.onmessage=t=>{wt(t.data.key,t.data.fid)}),N}function Br(){yt.size===0&&N&&(N.close(),N=null)}var Lr="firebase-installations-database",Fr=1,M="firebase-installations-store",ve=null;function Ae(){return ve||(ve=J(Lr,Fr,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(M)}}})),ve}function X(t,e){return u(this,null,function*(){let n=Y(t),i=(yield Ae()).transaction(M,"readwrite"),s=i.objectStore(M),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&vt(t,e.fid),e})}function Tt(t){return u(this,null,function*(){let e=Y(t),r=(yield Ae()).transaction(M,"readwrite");yield r.objectStore(M).delete(e),yield r.done})}function Q(t,e){return u(this,null,function*(){let n=Y(t),i=(yield Ae()).transaction(M,"readwrite"),s=i.objectStore(M),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&vt(t,a.fid),a})}function Ce(t){return u(this,null,function*(){let e,n=yield Q(t.appConfig,r=>{let i=Ur(r),s=$r(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Te?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function Ur(t){let e=t||{fid:Mr(),registrationStatus:0};return St(e)}function $r(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(R.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=jr(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Vr(t)}:{installationEntry:e}}function jr(t,e){return u(this,null,function*(){try{let n=yield Dr(t,e);return X(t.appConfig,n)}catch(n){throw pt(n)&&n.customData.serverCode===409?yield Tt(t.appConfig):yield X(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function Vr(t){return u(this,null,function*(){let e=yield ct(t.appConfig);for(;e.registrationStatus===1;)yield It(100),e=yield ct(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield Ce(t);return r||n}return e})}function ct(t){return Q(t,e=>{if(!e)throw R.create("installation-not-found");return St(e)})}function St(t){return Hr(t)?{fid:t.fid,registrationStatus:0}:t}function Hr(t){return t.registrationStatus===1&&t.registrationTime+ft<Date.now()}function zr(r,i){return u(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=qr(t,n),o=Ar(t,n),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={installation:{sdkVersion:dt,appId:t.appId}},f={method:"POST",headers:o,body:JSON.stringify(c)},g=yield Et(()=>fetch(s,f));if(g.ok){let d=yield g.json();return mt(d)}else throw yield bt("Generate Auth Token",g)})}function qr(t,{fid:e}){return`${gt(t)}/${e}/authTokens:generate`}function Oe(t,e=!1){return u(this,null,function*(){let n,r=yield Q(t.appConfig,s=>{if(!At(s))throw R.create("not-registered");let o=s.authToken;if(!e&&Gr(o))return s;if(o.requestStatus===1)return n=Wr(t,e),s;{if(!navigator.onLine)throw R.create("app-offline");let a=Xr(s);return n=Kr(t,a),a}});return n?yield n:r.authToken})}function Wr(t,e){return u(this,null,function*(){let n=yield ut(t.appConfig);for(;n.authToken.requestStatus===1;)yield It(100),n=yield ut(t.appConfig);let r=n.authToken;return r.requestStatus===0?Oe(t,e):r})}function ut(t){return Q(t,e=>{if(!At(e))throw R.create("not-registered");let n=e.authToken;return Yr(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Kr(t,e){return u(this,null,function*(){try{let n=yield zr(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield X(t.appConfig,r),n}catch(n){if(pt(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield Tt(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield X(t.appConfig,r)}throw n}})}function At(t){return t!==void 0&&t.registrationStatus===2}function Gr(t){return t.requestStatus===2&&!Jr(t)}function Jr(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+vr}function Xr(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Yr(t){return t.requestStatus===1&&t.requestTime+ft<Date.now()}function Qr(t){return u(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield Ce(e);return r?r.catch(console.error):Oe(e).catch(console.error),n.fid})}function Zr(t,e=!1){return u(this,null,function*(){let n=t;return yield ei(n),(yield Oe(n,e)).token})}function ei(t){return u(this,null,function*(){let{registrationPromise:e}=yield Ce(t);e&&(yield e)})}function ti(t){if(!t||!t.options)throw we("App Configuration");if(!t.name)throw we("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw we(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function we(t){return R.create("missing-app-config-values",{valueName:t})}var Ct="installations",ni="installations-internal",ri=t=>{let e=t.getProvider("app").getImmediate(),n=ti(e),r=B(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ii=t=>{let e=t.getProvider("app").getImmediate(),n=B(e,Ct).getImmediate();return{getId:()=>Qr(n),getToken:i=>Zr(n,i)}};function si(){A(new b(Ct,ri,"PUBLIC")),A(new b(ni,ii,"PRIVATE"))}si();T(lt,Se);T(lt,Se,"esm2017");var Ot="@firebase/performance",Pe="0.6.5";var Lt=Pe,oi="FB-PERF-TRACE-START",ai="FB-PERF-TRACE-STOP",xe="FB-PERF-TRACE-MEASURE",Ft="_wt_",Ut="_fp",$t="_fcp",jt="_fid",Vt="@firebase/performance/config",Ht="@firebase/performance/configexpire",ci="performance",zt="Performance";var ui={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},p=new w(ci,zt,ui);var y=new x(zt);y.logLevel=l.INFO;var De,qt,h=class t{constructor(e){if(this.window=e,!e)throw p.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Je()?(y.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):z()?!0:(y.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(let s of i.getEntries())n(s)}).observe({entryTypes:[e]})}static getInstance(){return De===void 0&&(De=new t(qt)),De}};function li(t){qt=t}var Wt;function fi(t){let e=t.getId();return e.then(n=>{Wt=n}),e}function Le(){return Wt}function di(t){let e=t.getToken();return e.then(n=>{}),e}function Dt(t,e){let n=t.length-e.length;if(n<0||n>1)throw p.create("invalid String merger input");let r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Ne,m=class t{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Dt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Dt("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Ne===void 0&&(Ne=new t),Ne}};var $=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}($||{}),hi=["firebase_","google_","ga_"],pi=new RegExp("^[a-zA-Z]\\w*$"),gi=40,mi=100;function bi(){let t=h.getInstance().navigator;return t?.serviceWorker?t.serviceWorker.controller?2:3:1}function Kt(){switch(h.getInstance().document.visibilityState){case"visible":return $.VISIBLE;case"hidden":return $.HIDDEN;default:return $.UNKNOWN}}function _i(){let e=h.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Ei(t){return t.length===0||t.length>gi?!1:!hi.some(n=>t.startsWith(n))&&!!t.match(pi)}function Ii(t){return t.length!==0&&t.length<=mi}function Gt(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.appId;if(!n)throw p.create("no app id");return n}function yi(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.projectId;if(!n)throw p.create("no project id");return n}function vi(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.apiKey;if(!n)throw p.create("no api key");return n}var wi="0.0.1",E={loggingEnabled:!0},Ti="FIREBASE_INSTALLATIONS_AUTH";function Si(t,e){let n=Ai();return n?(Nt(n),Promise.resolve()):Di(t,e).then(Nt).then(r=>Ci(r),()=>{})}function Ai(){let t=h.getInstance().localStorage;if(!t)return;let e=t.getItem(Ht);if(!e||!Ni(e))return;let n=t.getItem(Vt);if(n)try{return JSON.parse(n)}catch{return}}function Ci(t){let e=h.getInstance().localStorage;!t||!e||(e.setItem(Vt,JSON.stringify(t)),e.setItem(Ht,String(Date.now()+m.getInstance().configTimeToLive*60*60*1e3)))}var Oi="Could not fetch config, will use default configs";function Di(t,e){return di(t.installations).then(n=>{let r=yi(t.app),i=vi(t.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,o=new Request(s,{method:"POST",headers:{Authorization:`${Ti} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:Gt(t.app),app_version:Lt,sdk_version:wi})});return fetch(o).then(a=>{if(a.ok)return a.json();throw p.create("RC response not ok")})}).catch(()=>{y.info(Oi)})}function Nt(t){if(!t)return t;let e=m.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=E.loggingEnabled,n.fpr_log_source?e.logSource=Number(n.fpr_log_source):E.logSource&&(e.logSource=E.logSource),n.fpr_log_endpoint_url?e.logEndPointUrl=n.fpr_log_endpoint_url:E.logEndPointUrl&&(e.logEndPointUrl=E.logEndPointUrl),n.fpr_log_transport_key?e.transportKey=n.fpr_log_transport_key:E.transportKey&&(e.transportKey=E.transportKey),n.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):E.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=E.networkRequestsSamplingRate),n.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):E.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=E.tracesSamplingRate),e.logTraceAfterSampling=Rt(e.tracesSamplingRate),e.logNetworkAfterSampling=Rt(e.networkRequestsSamplingRate),t}function Ni(t){return Number(t)>Date.now()}function Rt(t){return Math.random()<=t}var Fe=1,Re;function Jt(t){return Fe=2,Re=Re||Mi(t),Re}function Ri(){return Fe===3}function Mi(t){return ki().then(()=>fi(t.installations)).then(e=>Si(t,e)).then(()=>Mt(),()=>Mt())}function ki(){let t=h.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){let n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function Mt(){Fe=3}var Ue=10*1e3,Pi=5.5*1e3,Xt=3,xi=1e3,ee=Xt,C=[],kt=!1;function Bi(){kt||(te(Pi),kt=!0)}function te(t){setTimeout(()=>{if(ee!==0){if(!C.length)return te(Ue);Li()}},t)}function Li(){let t=C.splice(0,xi),e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:m.getInstance().logSource,log_event:e};Fi(n,t).catch(()=>{C=[...t,...C],ee--,y.info(`Tries left: ${ee}.`),te(Ue)})}function Fi(t,e){return Ui(t).then(n=>(n.ok||y.info("Call to Firebase backend failed."),n.json())).then(n=>{let r=Number(n.nextRequestWaitMillis),i=Ue;isNaN(r)||(i=Math.max(r,i));let s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(C=[...e,...C],y.info("Retry transport request later.")),ee=Xt,te(i)})}function Ui(t){let e=m.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function $i(t){if(!t.eventTime||!t.message)throw p.create("invalid cc log");C=[...C,t]}function ji(t){return(...e)=>{let n=t(...e);$i({message:n,eventTime:Date.now()})}}var Me;function Yt(t,e){Me||(Me=ji(Hi)),Me(t,e)}function Z(t){let e=m.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||h.getInstance().requiredApisAvailable()&&(t.isAuto&&Kt()!==$.VISIBLE||(Ri()?ke(t):Jt(t.performanceController).then(()=>ke(t),()=>ke(t))))}function ke(t){if(!Le())return;let e=m.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>Yt(t,1),0)}function Vi(t){let e=m.getInstance();if(!e.instrumentationEnabled)return;let n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>Yt(t,0),0)}function Hi(t,e){return e===0?zi(t):qi(t)}function zi(t){let e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Qt(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function qi(t){let e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);let n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);let r={application_info:Qt(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function Qt(t){return{google_app_id:Gt(t),app_instance_id:Le(),web_app_info:{sdk_version:Lt,page_url:h.getInstance().getUrl(),service_worker_status:bi(),visibility_state:Kt(),effective_connection_type:_i()},application_process_state:0}}var Wi=100,Ki="_",Gi=[Ut,$t,jt];function Ji(t,e){return t.length===0||t.length>Wi?!1:e&&e.startsWith(Ft)&&Gi.indexOf(t)>-1||!t.startsWith(Ki)}function Xi(t){let e=Math.floor(t);return e<t&&y.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}var k=class t{constructor(e,n,r=!1,i){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=h.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${oi}-${this.randomId}-${this.name}`,this.traceStopMark=`${ai}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${xe}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw p.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw p.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Z(this)}record(e,n,r){if(e<=0)throw p.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw p.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(let i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));Z(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(Ji(e,this.name))this.counters[e]=Xi(n??0);else throw p.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){let r=Ei(e),i=Ii(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw p.create("invalid attribute name",{attributeName:e});if(!i)throw p.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){let e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,i){let s=h.getInstance().getUrl();if(!s)return;let o=new t(e,Ft+s,!0),a=Math.floor(h.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),n&&n[0]&&(o.setDuration(Math.floor(n[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));let c="first-paint",f="first-contentful-paint";if(r){let g=r.find(I=>I.name===c);g&&g.startTime&&o.putMetric(Ut,Math.floor(g.startTime*1e3));let d=r.find(I=>I.name===f);d&&d.startTime&&o.putMetric($t,Math.floor(d.startTime*1e3)),i&&o.putMetric(jt,Math.floor(i*1e3))}Z(o)}static createUserTimingTrace(e,n){let r=new t(e,n,!1,n);Z(r)}};function Pt(t,e){let n=e;if(!n||n.responseStart===void 0)return;let r=h.getInstance().getTimeOrigin(),i=Math.floor((n.startTime+r)*1e3),s=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,o=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],c={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};Vi(c)}var Yi=5e3;function xt(t){Le()&&(setTimeout(()=>Zi(t),0),setTimeout(()=>Qi(t),0),setTimeout(()=>es(t),0))}function Qi(t){let e=h.getInstance(),n=e.getEntriesByType("resource");for(let r of n)Pt(t,r);e.setupObserver("resource",r=>Pt(t,r))}function Zi(t){let e=h.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{k.createOobTrace(t,n,r),i=void 0},Yi);e.onFirstInputDelay(s=>{i&&(clearTimeout(i),k.createOobTrace(t,n,r,s))})}else k.createOobTrace(t,n,r)}function es(t){let e=h.getInstance(),n=e.getEntriesByType("measure");for(let r of n)Bt(t,r);e.setupObserver("measure",r=>Bt(t,r))}function Bt(t,e){let n=e.name;n.substring(0,xe.length)!==xe&&k.createUserTimingTrace(t,n)}var Be=class{constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),h.getInstance().requiredApisAvailable()?q().then(n=>{n&&(Bi(),Jt(this).then(()=>xt(this),()=>xt(this)),this.initialized=!0)}).catch(n=>{y.info(`Environment doesn't support IndexedDB: ${n}`)}):y.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){m.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return m.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){m.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return m.getInstance().dataCollectionEnabled}},ts="[DEFAULT]";function Ys(t=ye()){return t=W(t),B(t,"performance").getImmediate()}function Qs(t,e){t=W(t);let n=B(t,"performance");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(P(s,e??{}))return i;throw p.create("already initialized")}return n.initialize({options:e})}function Zs(t,e){return t=W(t),new k(t,e)}var ns=(t,{options:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==ts)throw p.create("FB not default");if(typeof window>"u")throw p.create("no window");li(window);let i=new Be(n,r);return i._init(e),i};function rs(){A(new b("performance",ns,"PUBLIC")),T(Ot,Pe),T(Ot,Pe,"esm2017")}rs();export{He as a,ze as b,is as c,ss as d,u as e,cn as f,hn as g,as as h,cs as i,us as j,Ge as k,ls as l,fs as m,ds as n,hs as o,z as p,q,Je as r,v as s,w as t,ps as u,P as v,gs as w,ms as x,bs as y,W as z,b as A,l as B,x as C,J as D,Ss as E,A as F,B as G,xs as H,hr as I,ye as J,Bs as K,T as L,Ys as M,Qs as N,Zs as O};
